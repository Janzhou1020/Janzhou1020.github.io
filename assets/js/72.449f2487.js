(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{520:function(t,s,a){"use strict";a.r(s);var n=a(7),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("大坑：配置好动作后出现问题，动作一直不触发**")]),t._v(" "),s("p",[s("strong",[t._v("用户组对状态发生改变的主机的主机群组有读的权限才能触发动作")])]),t._v(" "),s("p",[t._v("先获取发送邮箱的授权码")]),t._v(" "),s("p",[t._v("然后在 zabbix server 中配置邮箱相关信息：管理 --\x3e 媒介 --\x3e 创建媒介类型")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240822172346487.png",alt:"image-20240822172346487"}}),t._v(" "),s("p",[t._v("接下来测试邮件发送")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/a3ed95ec2ebdcbd606132880293e5ed.png",alt:"a3ed95ec2ebdcbd606132880293e5ed"}}),t._v(" "),s("p",[t._v("配置收件人：管理 --\x3e 用户 --\x3e 创建用户")]),t._v(" "),s("p",[t._v("或者是创建一个用户组，发送给此组里的每一个用户")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240823103451521.png",alt:"image-20240823103451521"}}),t._v(" "),s("p",[t._v("我们的目的是运维组 4 可以监控到主机  Zabbix 的告警后，通知 运维组 4 里的成员触发邮件报警")]),t._v(" "),s("p",[s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240823103817443.png",alt:"image-20240823103817443"}}),s("img",{attrs:{src:"/img/image-20240823103932639.png",alt:"image-20240823103932639"}})]),t._v(" "),s("p",[t._v("给运维组 4 添加上 Zabbix 所在的主机群 Zabbix servers 的可读权限")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240823104008728.png",alt:"image-20240823104008728"}}),t._v(" "),s("p",[t._v("接下来配置动作")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240823104109920.png",alt:"image-20240823104109920"}}),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240823104205800.png",alt:"image-20240823104205800"}}),t._v(" "),s("p",[t._v("接下来测试 nginx 的启动和停止（在此之前，触发器已经配置好了）"),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240823104418299.png",alt:"image-20240823104418299"}})]),t._v(" "),s("p",[t._v("再把 nginx 启动，把两条短信一起观察")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/1724381296538.png",alt:"1724381296538"}}),t._v(" "),s("p",[t._v("从短信可以看到之前配置的模板信息")]),t._v(" "),s("img",{staticStyle:{zoom:"80%"},attrs:{src:"/img/image-20240823104908198.png",alt:"image-20240823104908198"}}),t._v(" "),s("p",[s("strong",[t._v("短信信息模板")])]),t._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("告警主机："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOSTNAME1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n告警时间："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EVENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EVENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TIME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n告警等级："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TRIGGER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SEVERITY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n告警信息："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TRIGGER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n告警项目："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TRIGGER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("KEY1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n问题详情："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ITEM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ITEM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VALUE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n当前状态："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TRIGGER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATUS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ITEM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VALUE1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n事件"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EVENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("问题恢复模板")]),t._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("故障已恢复：【"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOSTNAME1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("】"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("br"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n故障原因："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TRIGGER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);