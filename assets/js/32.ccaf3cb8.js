(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{481:function(s,a,t){"use strict";t.r(a);var e=t(7),l=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("备份单个数据库：mysqldump -u 用户名 -p 数据库名 > 备份文件.sql")]),s._v(" "),a("p",[s._v("备份多个数据库：mysqldump -u 用户名 -p --databases 数据库名1 数据库名2 > 备份文件.sql")]),s._v(" "),a("p",[s._v("备份所有数据库：mysqldump -u 用户名 -p --all-databases > all_databases_backup.sql")]),s._v(" "),a("p",[s._v("只备份表结构：mysqldump -u 用户名 -p --no-data 数据库名 > 结构备份.sql")]),s._v(" "),a("p",[s._v("备份时只导出数据：mysqldump -u 用户名 -p --no-create-info 数据库名 > 数据备份.sql")]),s._v(" "),a("p",[s._v("写一个脚本数据库备份脚本，夜里2点执行")]),s._v(" "),a("p",[s._v("前提：确保 mysql 命令加入到了环境变量")]),s._v(" "),a("p",[s._v("为了数据安全，可以在备份数据库后，将文件同步到其他主机，采用 mysqldump + rsync")]),s._v(" "),a("p",[s._v("首先在远程主机上开启 rsync 服务，配置好 ssh 免密登录")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\nmysqldump "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-uroot")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p123456")]),s._v(" --all-databases "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /opt/sqlfile/"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(".sql\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-avz")]),s._v(" /opt/sqlfile/ root@10.0.0.25:/opt/sqlfile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("然后配置夜里2点执行：crontab -e")]),s._v(" "),a("p",[s._v("0 2 * * * /opt/sh/bfsql.sh 2>&1")])])}),[],!1,null,null,null);a.default=l.exports}}]);